# 演算子

![C言語演算子早わかりガイド](p1c2.png)

## 1. はじめに：演算子とは何か？ なぜ重要なのか？

このガイドは、C言語プログラミングの核心をなす「演算子（えんざんし）」について、プログラムを学び始めた皆さんが、その役割と使い方を体系的に理解することを目的としています。

プログラムとは、突き詰めればデータを処理する命令の集まりです。そして演算子とは、その処理の最も基本的な「動詞」、つまり足し算や比較といった具体的なアクションを実行するための「道具」なのです。

これらの道具を一つひとつ正しく理解し、適切に使いこなすことが、意図通りに動作する信頼性の高いコードを書くための、揺るぎない第一歩となります。

本ガイドを通じて、C言語に用意されている様々な演算子の種類とその役割を順を追って学んでいきましょう。

---------------------------------------------------------------

## 2. 数値計算の基本：算術演算子

算術演算子は、プログラムにおけるあらゆる数値計算の土台を形成する、極めて重要な要素です。言い換えれば、これらがなければデータに基づいた意味のある処理はほとんど実現できません。ここでは、C言語における基本的な計算のルールを学びます。

**算術演算子の一覧**

C言語では、主に以下の5つの算術演算子が使用されます。

|演算子|意味|使用例|結果|
|---|--|--|--|
|+|足し算 （加算）|`5 + 3`|`8`|
|-|引き算 （減算）|`5 - 3`|`2`|
|*|かけ算 （乗算）|`5 * 3`|`15`|
|/|割り算 （除算）|`5 / 3`|`1`|
|%|剰余 （割り算の 余り）|`5 % 3`|`2`|

**重要な注意点**

1. 乗算・除算記号 プログラミングの世界では、数学で使う記号とは異なり、かけ算には * (アスタリスク)、割り算には / (スラッシュ) を使用します。これはC言語に限らず、多くのプログラミング言語で共通のルールです。
2. 整数除算の罠 上記の表で `5 / 3` の結果が `1.666...` ではなく `1` になっている点に注意してください。C言語では、整数同士の割り算の結果は、小数点以下が切り捨てられ、整数になります。これはバグの原因となりやすいため、正確な計算が必要な場合は後述する「キャスト演算子」の知識が重要になります。

**剰余演算子（%）の価値**

剰余演算子 % は、単に「割り算の余り」を求めるだけではありません。特定の周期を持つ処理や条件判定において、非常に強力な道具となります。

代表的なユースケース：偶数・奇数の判定 ある整数 n が偶数かどうかを判定したい場合、n % 2 の計算結果を見ます。

* 結果が `0` ならば、その数は2で割り切れるため 偶数 です。
* 結果が `1` ならば、その数は2で割り切れないため 奇数 です。

このように、剰余演算子は特定の条件を満たすかどうかを簡潔に判定する際に役立ちます。

基本的な計算方法を理解したところで、次にそれらの計算結果を変数に保存する方法を見ていきましょう。

## 3. 値の格納と更新：代入およびインクリメント・デクリメント演算子

プログラムが単に計算するだけでなく、その結果を記憶し、状態を変化させていくためには「代入」という概念が不可欠です。ここでは、変数に値を設定したり、既存の値を効率的に更新したりするための演算子を学びます。

### 3.1. 代入演算子：変数に値を「しまう」

代入演算子は、計算結果や特定の値を指定した変数に格納（代入）する役割を持ちます。

|演算子|意味|使用例|同等のコード|
|---|---|---|---|
|=|代入|`score = 80;`|N/A|
|+=|加算代入|`x += 5;`|`x = x + 5;`|
|-=|減算代入|`y -= 2;`|`y = y - 2;`|
|*=|乗算代入|`z *= 3;`|`z = z * 3;`|

**複合代入演算子の利点**

x = x + 5; というコードは、「変数xの現在の値に5を足し、その結果を再び変数xに格納する」という意味です。このような「自分自身の値を更新する」処理は、プログラミングでは非常に頻繁に登場します。

x += 5; のような複合代入演算子は、この頻出パターンをより短く、そして直感的に記述するために用意されています。この形式は、単に文字数を減らすだけでなく、「この変数は自身の状態を更新している」という意図をコード上で明確に示します。これにより、大規模なプログラムでもデータの変更追跡が容易になります。

### 3.2. インクリメント・デクリメント演算子：「1」だけ増減させる

変数の値を「1だけ増やす」または「1だけ減らす」という操作は、特にループ処理などでカウンターを管理する際に極めて頻繁に行われます。そのための専用の便利な演算子が用意されています。

演算子	意味	使用例	同等のコード
++	インクリメント （1増やす）	`i++;`	`i = i + 1;`
--	デクリメント （1減らす）	`j--;`	`j = j - 1;`

**これらの演算子の戦略的重要性**

例えば「1から10まで順番に処理を繰り返す」といったループを実装する場合、カウンタ変数を i とすると、ループの各ステップで i++ を実行することになります。このような定型的な処理を、i = i + 1; よりもはるかに簡潔に表現できるため、これらの演算子はC言語の構文に不可欠な要素となっています。実務では i++ のように、変数の後ろにつけることが多いです。

変数の値を操作する方法を学んだので、次はその値同士を比較してプログラムの動作を分岐させる方法を学びましょう。

## 4. 条件判断の核：比較演算子と論理演算子

優れたプログラムは、単に上から下へ一直線に処理を実行するだけではありません。特定の条件に応じて動作を変える「知能」を持っています。その判断ロジックを組み立てるための基本的な部品が、ここで紹介する比較演算子と論理演算子です。

### 4.1. 比較演算子：二つの値を「比べる」

比較演算子は、二つの値の関係性（等しいか、大きいかなど）を評価し、その結果を返します。

|演算子|意味|使用例 (a=10, b=5 の場合)|結果|
|---|---|---|---|
|==|等しい|`a == b`|`偽 (0)`|
|!=|等しくない|`a != b`|`真 (1)`|
|>|より大きい|`a > b`|`真 (1)`|
|<|より小さい|`a < b`|`偽 (0)`|
|>=|以上 （より大きいか、等しい）|`a >= b`|`真 (1)`|
|<=|以下 （より小さいか、等しい）|`a <= b`|`偽 (0)`|

**結果の性質：真(1)か偽(0)か**

比較演算が返す結果は、必ず「真（True）」または「偽（False）」のどちらかになります。C言語では、慣習的に真を 1、偽を 0 という整数で表現します。これらの演算子が返す 1 (真) か 0 (偽) という結果は、プログラムの流れを分岐させる if 文の『スイッチ』として機能します。この仕組みが、プログラムに知能を与える基本です。

**最重要注意点：= と == の違い**

**警告：** 初心者が最も陥りやすい間違いの一つが、代入演算子 = と等価比較演算子 == の混同です。

* a = 10;  は、「aという変数に10を代入する」という命令です。
* a == 10; は、「aの値は10と等しいか？」という**問いかけ（比較）**です。

条件分岐の if 文などでこれらを間違えると、意図しない動作や深刻なバグの原因となります。常に意識して使い分けるようにしてください。

### 4.2. 論理演算子：複数の条件を「組み合わせる」

一つの比較だけでは表現できない、より複雑な条件を組み立てるために論理演算子を使用します。

|演算子|意味|日本語の意味|使用例|
|---|---|---|---|
|&&|論理AND|A かつ B|`age > 18 && score >= 70`|
|`||`|論理OR|
|!|論理NOT|A ではない|`!is_raining`|

**各演算子の論理**

* 論理AND (&&): 「A かつ B」を意味します。両方の条件が真のときのみ、全体の評価が真 (1) になります。
  * 例: 「年齢が18歳より大きく、かつ、スコアが70点以上」という条件を満たす場合にのみ真となります。
* 論理OR (||): 「A または B」を意味します。どちらか一方、あるいは両方の条件が真であれば、全体の評価が真 (1) になります。
  * 例: 「月が1月または12月」という条件のように、いずれかの条件を満たせば真となります。
* 論理NOT (!): 「A ではない」を意味します。条件の真偽を反転させます。真 (1) の条件に付けると偽 (0) になり、偽 (0) の条件に付けると真 (1) になります。
  * 例: 「is_raining (雨が降っている) が偽の場合」を判定したいとき、!is_raining と書くことで「雨が降っていないならば」という条件を簡潔に表現できます。

複数の演算子を組み合わせる際の計算順序には明確なルールが存在します。次のセクションで、その優先順位について見ていきましょう。

## 5. 演算のルール：演算子の優先順位

5 + 3 * 2 という数式があった場合、私たちは自然と掛け算を先に行い、答えが 11 であると理解します。プログラムも同様に、式の中に複数の演算子が含まれる場合、どの計算を先に行うかを決定するための「優先順位」というルールを持っています。このルールを無視すると、予期せぬ計算結果やバグに繋がるため、正しく理解することが重要です。

**優先順位の階層**

C言語における主要な演算子の優先順位は、高いものから順に以下のようになります。

1. 最も高い: カッコ () の中
2. 次に高い: 単項演算子 (++, --, !)
3. 次に高い: 乗算 (*), 除算 (/), 剰余 (%)
4. 次に高い: 足し算 (+), 引き算 (-)
5. 次に高い: 比較演算子 (>, <, ==, != など)
6. 次に高い: 論理演算子 (&&, ||)
7. 最も低い: 代入演算子 (=, += など)

**最も重要な実践的アドバイス**

これらの優先順位をすべて暗記するのは大変ですし、間違いのもとです。そこで、プロの現場でも遵守されている最も安全で確実なルールがあります。

**黄金律： 迷ったときは、必ずカッコ () を使う**

カッコ () で囲まれた式は、他のどの演算子よりも常に最優先で計算されます。これにより、開発者は計算順序をコンパイラに明確に指示でき、意図しない動作を防ぐことができます。コードの可読性も向上するため、優先順位が自明な場合でも、複雑な式では積極的にカッコを使用することが推奨されます。

計算のルールを学んだ上で、さらにC言語が内部でデータをどのように扱っているかを理解するための、少し特殊な演算子について解説します。

## 6. メモリと型を扱う特殊な演算子

これまでに学んだ演算子とは少し趣が異なり、データの「大きさ」や「種類（型）」といった、よりコンピュータの内部構造に近い情報を扱うための特殊な演算子が存在します。これらを理解することは、メモリ効率や計算精度を意識した、より高度で精密なプログラミングへの扉を開きます。

### 6.1. sizeof演算子：データの「大きさ」を調べる

sizeof演算子は、変数やデータ型がコンピュータのメモリ上でどれくらいのサイズ（バイト数）を占めているかを調べるための「測定道具」です。この結果を printf 関数で表示する際には、%zu という専用の書式指定子を使用します。

プログラムが動作するとき、すべてのデータはメモリ上の「箱」に格納されます。sizeofを使えば、その「箱」の大きさを正確に知ることができます。例えば、sizeof(int) は int 型の変数が何バイトのメモリを必要とするかを返します。

**関連概念：ビットとバイト**

sizeofが返す値の単位である「バイト」を理解するために、情報の基本単位を知っておきましょう。

単位	意味	イメージ
ビット (bit)	情報を表す最小単位。2進数の1桁 (0か1) を表します。	スイッチ1つ
バイト (Byte)	8ビット をひとまとめにしたもの。	最も基本的なデータの箱

この「8ビット = 1バイト」という関係は、コンピュータサイエンスの基本です。例えば、sizeof(int) の結果が 4 であった場合、それは int 型のデータが 4 * 8 = 32 ビットの大きさを持つことを意味します。

### 6.2. キャスト演算子：データの「型」を一時的に変換する

キャスト演算子 (変換したい型) は、計算の途中で一時的に変数のデータ型を変更するための「型指定の魔法のカッコ」と考えることができます。

**キャストの具体的な価値**

* 問題提起 前述の通り、int 型の変数 a = 5, b = 2 があるとき、a / b の計算結果は小数点以下が切り捨てられ 2 になってしまいます。
* 解決策 ここでキャスト演算子を使います。(double)a / b と記述すると、計算の瞬間だけ変数 a が int 型の 5 から double 型の 5.0 として扱われます。C言語では、異なる型同士の計算では精度の高い方に合わせて処理が行われるため、もう一方の b も double 型の 2.0 として扱われ、5.0 / 2.0 の計算が実行されます。その結果、2.5 という数学的に正しい答えを得ることができます。

**型の変換パターン**

C言語における型の変換は、主に以下の2つのパターンで行われます。

1. 明示的な型変換 これは、開発者が (double)a のようにキャスト演算子を意図的に使って型を変換するケースです。計算の精度を保証したい場合などに使用します。
2. 暗黙的な型変換 これは、C言語のコンパイラが文脈に応じて自動的に型を変換するケースです。
  * 格上げ: int 型の値と double 型の値を計算する場合、精度の低い int が自動的に double に「格上げ」されてから計算されます。
  * 代入時の変換: int 型の変数に double 型の値を代入しようとすると、小数点以下が自動的に切り捨てられて整数部分だけが格納されます。（例: `int score = 95.8;` と書くと、score には 95 が入ります）

これまでに学んだ演算子を組み合わせることで、プログラムの処理の流れを自在に制御する準備が整いました。

## 7. まとめと次のステップ

このガイドでは、C言語における様々な「道具」である演算子について学んできました。数値計算を行う算術演算子、変数に値を格納する代入演算子、そしてプログラムに判断能力を与える比較演算子と論理演算子。これらの基本的な役割と使い方を理解できたはずです。

特に、比較演算子と論理演算子は、これから皆さんが学ぶプログラミングの次のステップにおいて、極めて重要な役割を果たします。なぜなら、これらの演算子が返す「真(1)」か「偽(0)」という結果こそが、プログラムの流れを制御する「条件分岐（if文）」や、同じ処理を繰り返す「繰り返し（for文, while文）」の動作を決定するからです。

今回身につけた演算子の知識を土台に、次はいよいよプログラムのフロー制御を学んでいきましょう。
